Titanium.UI.setBackgroundColor("#000");

var mainWindow = Ti.UI.createWindow({
	backgroundColor: "#f5f5f5"
});

var titleView = Ti.UI.createView({
	height: 65,
	backgroundColor: "fff",
	top: 0
});

var border = Ti.UI.createView({
	backgroundColor: "dbdbdb",
	height: 1,
	top: titleView.height + titleView.top
});

var titleLabel = Ti.UI.createLabel({
	text: "Gallente Tech 1 Ships",
	font: {fontSize: 20, fontFamily: "Arial", fontWeight: "Bold"},
	top: 30,
	width: "100%",
	textAlign: "center"
});

var ships = Ti.UI.createTableView({
	top: border.top + border.height,
});

// iOS has 2 Table Styles: GROUPED or PLAIN (PLAIN set by default)
if(Ti.Platform.name === "iPhone OS"){
	ships.style = Ti.UI.iPhone.TableViewStyle.GROUPED;
}

var frigatesSection = Ti.UI.createTableViewSection({
	headerTitle: "Tech 1 Frigates",
	footerTitle: "Gallente Frigate Ships"
});

var cruisersSection = Ti.UI.createTableViewSection({
	headerTitle: "Tech 1 Cruisers",
	footerTitle: "Gallente Cruiser Ships"
});

var getDetail = function(){
	var detailWindow = Ti.UI.createWindow({
		backgroundColor: "#f5f5f5"
	});
	
	var detailTitleView = Ti.UI.createView({
		height: 65,
		backgroundColor: "fff",
		top: 0
	});
	
	var detailBorder = Ti.UI.createView({
		backgroundColor: "dbdbdb",
		height: 1,
		top: detailTitleView.height + detailTitleView.top
	});
	
	var detailTitleLabel = Ti.UI.createLabel({
		text: this.title,
		font: {fontSize: 20, fontFamily: "Arial", fontWeight: "Bold"},
		top: 30,
		width: "100%",
		textAlign: "center"
	});
	
	var detailText = Ti.UI.createLabel({
		text: this.desc,
		font: {fontSize: 14, fontFamily: "Arial"},
		top:detailBorder.height + detailBorder.top + 40,
		left: 10,
		right: 10
	});
	
	var closeButton = Ti.UI.createLabel({
		text: "Close Window",
		backgroundColor: "#333",
		color: "#fff",
		height: 50,
		font: {fontSize: 12, fontFamily: "Arial"},
		width: "100%",
		bottom: 0,
		textAlign: "center"
	});

	var closeWindow = function(){
		detailWindow.close({transition: Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT});
	};
	
	closeButton.addEventListener("click", closeWindow);	
	
	detailTitleView.add(detailTitleLabel);
	detailWindow.add(detailTitleView, detailBorder, detailText, closeButton);
	
	detailWindow.open({transition: Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT});
	
	//Using the keyword "this" references what ever property that called it in the function.
	
};

for(var i=0, j=frigates.length; i<j; i++){
	var theRow = Ti.UI.createTableViewRow({
		title: frigates[i].title,
		desc: frigates[i].description,
		hasChild: true
	});
	
	// hasChild is universal whereas hasDetail is iOS specific.  One or the other.
	if(Ti.Platform.name === "iPhone OS"){
		theRow.hasChild = false;
		theRow.hasDetail = true;
	}
	
	frigatesSection.add(theRow);
	theRow.addEventListener("click", getDetail);
	
};

	
for(var i=0, j=cruisers.length; i<j; i++){
	var theRow = Ti.UI.createTableViewRow({
		title: cruisers[i].title
	});
	cruisersSection.add(theRow);
};
	

var shipsSections = [frigatesSection, cruisersSection];


ships.setData(shipsSections);

titleView.add(titleLabel);
mainWindow.add(titleView, border, ships);
mainWindow.open();
